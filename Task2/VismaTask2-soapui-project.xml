<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="70a74965-ba2c-49ec-a5c3-c9da9a133e55" activeEnvironment="Default" name="VismaTask2" resourceRoot="${projectDir}" soapui-version="5.6.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="TestSuite" value="Tech Test - Task 2"/>
  <con:entry key="Endpoint" value=""/>
  <con:entry key="Select Report Type" value=""/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Password" value=""/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Export JUnit Results with test properties" value="false"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Username" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Save Project" value="false"/>
</xml-fragment>]]></con:setting></con:settings><con:interface xsi:type="con:RestService" id="43e05af7-7007-42f3-8841-0b6368c1d8c8" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://jsonplaceholder.typicode.com" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint></con:endpoints><con:resource name="posts" path="/posts" id="16980be1-790c-404f-a75d-614b11a41506"><con:settings/><con:parameters/><con:method name="get posts" id="1edded9f-2f4e-4673-96b2-fe0156056fa5" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>Fault</con:element></con:representation><con:request name="get posts" id="9619feba-a3e8-47c4-9e2b-bdcb9352cf07" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request/><con:originalUri>https://jsonplaceholder.typicode.com/posts/1</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="users" path="/users" id="123e8a72-6cac-4e47-bbf4-b23f3b71c8c2"><con:settings/><con:parameters/><con:method name="get users" id="781bddbb-179e-47a7-a764-38bab9038171" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="get users" id="29499138-d4e8-4f4b-8b0c-4aac51aa0c56" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request/><con:originalUri>https://jsonplaceholder.typicode.com/users</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method><con:method name="add user" id="d6fd0fa2-487b-4951-b231-9fbc5c0f9e7c" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:user="https://jsonplaceholder.typicode.com/users">user:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="add user" id="8cae4856-dba4-4959-ac37-fd9960d66f47" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request>{
    "name": "Leanne Graham the 2nd",
    "username": "Bret 2",
    "email": "Sincere2@april.biz"
}</con:request><con:originalUri>https://jsonplaceholder.typicode.com/users</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="comments" path="/comments" id="42a49469-4c6b-4219-902e-96bb973881e3"><con:settings/><con:parameters/><con:method name="get comments" id="fd4d6a5d-d218-4f60-a242-cac2d237b7af" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="get comments" id="12549ae9-5c96-4bfb-91b2-eab002a797f2" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request/><con:originalUri>https://jsonplaceholder.typicode.com/comments</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="efe74ae7-a5e7-4e66-972b-1a230908606b" name="Tech Test - Task 2"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="4710c9af-5087-41be-822b-b0dedd763ba9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Point A." searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Contains Assertion" id="e3c98a03-a3ab-4c26-b1e2-a510a8c555a0"><con:settings/><con:config service="https://jsonplaceholder.typicode.com" resourcePath="/posts" methodName="get posts" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Contains Assertion" id="9619feba-a3e8-47c4-9e2b-bdcb9352cf07" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request/><con:originalUri>https://jsonplaceholder.typicode.com/posts/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="37069308-c247-4a3b-a962-1746df2afabf" name="Check response status - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a1368a37-1f93-4ccb-ac46-fa79944a6e28" name="Contains needed text"><con:configuration><token>"title": "qui est esse"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Match Expression" id="a1dae16b-47c6-40ce-9a6d-f7bddb06498b"><con:settings/><con:config service="https://jsonplaceholder.typicode.com" methodName="get posts" resourcePath="/posts" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Match Expression" id="eeb3b76d-fdf6-46fb-bf23-5fa1b321f9f5" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request/><con:originalUri>https://jsonplaceholder.typicode.com/posts</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="6001e29e-e615-437f-b1bb-8c0aad54ff77" name="Check response status - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="691bf471-f152-4020-bb6f-71d91625fb4a" name="Check expected value on specific element"><con:configuration><path>$[1].title</path><content>qui est esse</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Search in response" id="dccf8f71-a893-45ec-9d93-3cf6b4fcc3a3"><con:settings/><con:config service="https://jsonplaceholder.typicode.com" methodName="get posts" resourcePath="/posts" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Search in response" id="4aa9c2a5-64ad-4bd6-8881-e18869358500" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request/><con:originalUri>https://jsonplaceholder.typicode.com/posts</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7dc443ef-bce4-4892-9503-b0f3424190b3" name="Check response status - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="84bfd5b3-b997-4505-a2b5-7de2cf6c7569" name="JsonPath Count"><con:configuration><path>$[*].[?(@.title == qui est esse)]</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="0cfd2390-5806-4245-9225-e6baaad6ed7d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Point B." searchProperties="true"><con:settings/><con:testStep type="restrequest" name="Get current users list" id="571b0da7-0002-493d-994f-d94990307d14"><con:settings/><con:config service="https://jsonplaceholder.typicode.com" resourcePath="/users" methodName="get users" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get current users list" id="29499138-d4e8-4f4b-8b0c-4aac51aa0c56" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request/><con:originalUri>https://jsonplaceholder.typicode.com/users</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bcf66ffc-6ba8-4bc7-8616-4df5efb15966" name="Check response status - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="a3e8a24d-22e4-4b08-9d21-faf0dc018b8c" name="Expected to have 10 initial users"><con:configuration><path>$[*].id</path><content>10</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer current user count" id="51c8f990-2976-49d6-ab12-7b6ef4f5d53f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>count</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Get current users list</con:sourceStep><con:sourcePath>${#ResponseAsXml#count(//*:id)}</con:sourcePath><con:targetType>userCount</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="AddUser" id="9053f250-9571-456b-b78f-04309908aad3"><con:settings/><con:config service="https://jsonplaceholder.typicode.com" resourcePath="/users" methodName="add user" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="AddUser" id="8cae4856-dba4-4959-ac37-fd9960d66f47" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request>{
    "name": "${#TestCase#name}",
    "username": "${#TestCase#username}",
    "email": "${#TestCase#email}"
}
</con:request><con:originalUri>https://jsonplaceholder.typicode.com/users</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f9d824b-07bf-4e47-b791-c2f36aba4511" name="Check response status - 200"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="85060cbe-e530-48ff-a651-733c954ff9dc" name="Check name "><con:configuration><path>$.name</path><content>${#TestCase#name}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="85060cbe-e530-48ff-a651-733c954ff9dc" name="Check username "><con:configuration><path>$.username</path><content>${#TestCase#username}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="85060cbe-e530-48ff-a651-733c954ff9dc" name="Check email "><con:configuration><path>$.email</path><content>${#TestCase#email}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Check new user id" id="e74ad3cd-ad0c-4bb4-b679-4ab67e714c91"><con:settings/><con:config><script>/*
Taking into consideration the current limitation of https://jsonplaceholder.typicode.com/guide/ 
the "Important" section of the "Creating a resource" section stating that
Important: resource will not be really updated on the server but it will be faked as if.

we will just assume that the new given UserID is the count of all previous users +1

*/
import groovy.json.JsonSlurper

def previousCount = context.expand('${#TestCase#userCount}') as int

log.info " Last count is: " + previousCount

def AddUserResponse = testRunner.testCase.testSteps['AddUser'].testRequest.response.contentAsString
def slurper = new JsonSlurper()
def response = slurper.parseText(AddUserResponse)
def newUserId = response.id as int

log.info " Response user is: " + newUserId

def newCount = previousCount+1

if ( newCount == newUserId )

{
	log.info "UserID has expected id: " + newUserId
}
else
{
	testRunner.fail("New UserID is not as expected!")
}
</script></con:config></con:testStep><con:properties><con:property><con:name>name</con:name><con:value>StanRadu</con:value></con:property><con:property><con:name>username</con:name><con:value>radu.stan</con:value></con:property><con:property><con:name>email</con:name><con:value>radu.stan@visma.com</con:value></con:property><con:property><con:name>userCount</con:name><con:value>10</con:value></con:property></con:properties></con:testCase><con:testCase id="d196ac8d-051a-4e95-9a45-d1bc90e21248" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Point C." searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GetComments in givenThreshold" id="77536a35-f7bb-4063-b763-6e7b320a3dde"><con:settings/><con:config service="https://jsonplaceholder.typicode.com" resourcePath="/comments" methodName="get comments" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetComments in givenThreshold" id="12549ae9-5c96-4bfb-91b2-eab002a797f2" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://jsonplaceholder.typicode.com</con:endpoint><con:request/><con:originalUri>https://jsonplaceholder.typicode.com/comments</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="570120f5-1818-431a-9bf9-0ed44aa29ede" name="Check response status - 200"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Response SLA Assertion" id="c64f789d-baaf-4f0b-91c2-e79c32640f8f" name="Validate response time is equal or lower than givenThreshold"><con:configuration><SLA>200</SLA></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Additional check for response time" id="ac7e3ba8-575b-43c9-b213-86ad10a6ed1b"><con:settings/><con:config><script>/*
In order to bypass SoapUI limitation of not being able to use the a Project Property in a SLA assertion,
will just use a groovy script to test that execution time of previous response time is lower than the givenThreshold
*/

def responseTime = testRunner.testCase.testSteps['GetComments in givenThreshold'].testRequest.response.timeTaken as int

log.info "Response time: " + responseTime

def givenThreshold = testRunner.testCase.testSuite.project.getPropertyValue("givenThreshold") as int

log.info "Given Threshold: " + givenThreshold

if ( responseTime &lt; givenThreshold )

{
	log.info "GetComments request executed in " + responseTime + "ms which is lower than the givenThreshold: " + givenThreshold + "ms"
}
else
{
	testRunner.fail("GetComments request executed in " + responseTime + "ms which is bigger than  the givenThreshold: " + givenThreshold + "ms")
}</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>givenThreshold</con:name><con:value>200</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/></con:soapui-project>